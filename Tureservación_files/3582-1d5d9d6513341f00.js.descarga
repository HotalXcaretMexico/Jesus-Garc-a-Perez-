(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3582],{93582:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return L}});var t=o(47568),r=o(14924),a=o(26042),i=o(69396),c=o(29815),u=o(20414),s=o(85893),l=o(67294),d=o(45697),h=o.n(d),f=o(27484),m=o.n(f),g=o(26628),C=o(5152),b=o.n(C),k=o(75389),p=o.n(k),y=o(44094),x=o(59160),v=o(14839),P=o(11267),w=o(12325),R=o(65873);var M=o(8221),_=o(22344);o(67763),o(25054);var A=b()((function(){return o.e(8062).then(o.bind(o,68062))}),{loadableGenerated:{webpack:function(){return[68062]}},loading:function(){return(0,s.jsx)("p",{children:"..."})}}),S=b()((function(){return o.e(1599).then(o.bind(o,61599))}),{loadableGenerated:{webpack:function(){return[61599]}},loading:function(){return(0,s.jsx)("p",{children:"..."})}}),Z=b()((function(){return o.e(4966).then(o.bind(o,64966))}),{loadableGenerated:{webpack:function(){return[64966]}},loading:function(){return(0,s.jsx)("p",{children:"..."})}}),D=new Date,H={month:D.getMonth()+1,year:D.getFullYear()},I=M.I.MULTI_HOTEL,E=function(e){var n=e.onListing,o=e.isMobile,r=e.t,d=e.monthsToShow,h=e.dates,f=e.calendar,g=e.country,C=e.setCalendar,b=e.language,k=e.withChildren,y=e.currency,_=e.promocode,D=e.setDates,E=e.setPaxes,O=e.loading,j=e.token,L=e.setToken,T=e.isRelative,B=e.showBtnCancel,Y=e.onClickCancel,q=e.sizeCalendar,N=e.isControlled,z=e.isModify,F=e.setBooking,V=e.setPromocode,K=e.setSelectedRooms,U=e.setCurrentRoom,$=e.booking,G=e.u,W=e.handleOnClickModify,X=e.showBanksBell,J=e.initDate,Q=e.hotelCodes,ee=e.countryRule,ne=e.isAside,oe=e.maxRooms,te=e.maxPaxPerRoom,re=e.childrenMinAge,ae=e.childrenMaxAge,ie=e.BookingForm,ce=e.hidePrice,ue=e.isHome,se=e.noPromocode,le=e.bookingChangeEvent,de=e.hideActions,he=e.configurationKey,fe=e.calendarVersion,me=e.paxes,ge=e.themeClass,Ce=e.priceFilter,be=e.brand;m().locale("en");var ke=(0,l.useMemo)((function(){return I?"es"===b?"/es/hoteles/":"/en/hotels/":"es"===b?"/es/busqueda/":"/en/search/"}),[b,I]),pe=(0,l.useMemo)((function(){return o||ne}),[o,ne]),ye={withChildren:r.withChildren||k,maxRooms:r.maxRooms||oe,childrenMinAge:r.childrenMinAge||re,childrenMaxAge:r.childrenMaxAge||ae,maxPaxPerRoom:r.maxPaxPerRoom||te,monthsToShow:r.monthsToShow||d,initalDate:r.initalDate||J},xe=(0,l.useState)($.pax_rooms),ve=xe[0],Pe=xe[1],we=(0,l.useState)($.number_rooms),Re=we[0],Me=we[1],_e=(0,l.useState)([]),Ae=_e[0],Se=_e[1],Ze=(0,l.useState)(Q||[31453,74213,79260]),De=Ze[0],He=Ze[1],Ie=function(e){Pe(e)},Ee=function(e){Me(e)};(0,l.useEffect)((function(){var e=(0,w.hS)(parseInt(Re,10)).map((function(e){var n=(0,w.hS)(ve[e].children).map((function(n){return ve[e].childrenAges[n]}));return(0,a.Z)({},{adults:ve[e].adults},ve[e].children>0&&{children:ve[e].children},ve[e].children>0&&{childrenAges:n})}));Se(e)}),[ve,Re]);var Oe=(0,l.useState)("hidden"),je=(Oe[0],Oe[1]),Le=(0,l.useState)(!1),Te=Le[0],Be=Le[1],Ye=(0,l.useRef)(),qe=(0,l.useState)(function(e){var n,o=e.dates,t=e.monthsToShow,r=e.actualDate,a=null;if(""!==o.checkin){var i=m()(o.checkin);a=i.year(),n=i.month()+t}else a=r.year,n=r.month+t-1;return n>12&&(n-=12,a+=1),{month:n,year:a}}({dates:h,monthsToShow:ye.monthsToShow,actualDate:H})),Ne=qe[0],ze=qe[1],Fe=(0,l.useState)([]),Ve=Fe[0],Ke=Fe[1],Ue=(0,l.useState)([]),$e=Ue[0],Ge=Ue[1],We=(0,l.useState)(h),Xe=We[0],Je=We[1],Qe=(0,l.useState)(!0),en=Qe[0],nn=Qe[1],on=function(e){var n=Ne.month-d+e+1,o=Ne.year;return n<1?{month:n+12,year:o-1}:n>12?{month:n-12,year:o+1}:{month:n,year:o}},tn=function(){!Te?je("fadeIn block"):(je("fadeOut"),setTimeout((function(){je("hidden")}),500)),Be(!Te)};(0,l.useEffect)((function(){var e=(0,c.Z)(Array(d)).map((function(e,n){return on(n)}));Ge(e)}),[]),(0,l.useEffect)((function(){Te&&!pe&&Ye.current.scrollIntoView({behavior:"smooth"})}),[Te]);var rn=T?"relative":"",an=o?p().negativeMargin1:"",cn=p().default;"small"===q&&(cn=p().small),"default"===q&&(cn=p().default),(0,l.useEffect)((function(){var e=function(){var e=(0,t.Z)((function(){var e;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return[4,Promise.all((0,c.Z)(Array(d)).map((function(e,n){var o=on(n),t=o.month,r=o.year,a=Ve.find((function(e){return e.key==="".concat(r,"-").concat(t,"-").concat(y.iso)}));return a||(C({calendar:"fetching"}),new Promise((function(e){(0,v.c7)({year:r,month:t,currency:y.iso,promocode:_,language:b,country:g,hotelCodes:0===De.length?M.I.CODES:De,countryRule:ee}).then((function(e){var n=e.data,o=n.some((function(e){return null===e.filters.promotion||e.filters.promotion.applied}));nn(o);var a=[];n.map((function(e){e.nights.map((function(e,n){((0,P.xb)(a[n])||(e.amount<a[n].amount||0===a[n].amount)&&e.amount>0)&&(a[n]=e)}))}));var i={key:"".concat(r,"-").concat(t,"-").concat(y.iso),date:{year:r,month:t},nights:a};return Ke((function(e){return(0,c.Z)(e).concat([i])})),i})).then((function(n){C({calendar:"success"}),e(n)})).catch((function(){C({calendar:"failed"}),e({date:{year:r,month:t},nights:[]})}))})))})))];case 1:return e=n.sent(),Ge(e),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[Ne,y,_,De]);var un=(0,s.jsx)("div",{className:"fixed ".concat(ue?"relative":"md:absolute"," ").concat(o?"px-2 pt-2 pb-10":"-mt-8"," flex flex-wrap flex-col left-0 top-0 ").concat(ce?"items-center":"","  bg-white rounded z-40 md:p-8 ").concat(Te?"block":"hidden","\n        ").concat(pe?"animated ".concat(o?"w-full ".concat(cn):p().calAsideDesk):"md:w-full ".concat(ue?"w-full":"lg:w-full xl:w-11/12")," "),children:(0,s.jsx)(S,{t:r.hotelBoxCalendar,u:G,state:{status:f},promocode:_,onMonthChange:function(e){C({calendar:"idle"}),ze(e)},onApplyPromocode:function(e){C({calendar:"idle"}),V({promocode:e}),Ke([])},onDatesUpdate:function(e){Je(e)},isValidPromocode:en,language:b,currency:y.iso,country:g,monthsToShow:d,data:$e,date:Ne,checkin:h.checkin,checkout:h.checkout,toggleBoxCalendarHandler:tn,isMobile:o,showBanksBell:X,hidePrice:ce,noPromocode:se,version:fe,themeClass:ge,priceFilter:Ce,priceHotels:{selectHotel:De,setSelectHotel:He,setData:Ke},brand:be})}),sn=function(){var e=(0,t.Z)((function(){var e,n;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return e={token:j,language:b,dates:Xe,promocode:_,currency:y.iso,country:g},[4,(0,R.A)((0,x.Py)(e))];case 1:if((n=o.sent()).hasError)throw new Error("Error valid token");return L({token:n.data}),[2,n.data]}}))}));return function(){return e.apply(this,arguments)}}(),ln=function(){var e=(0,t.Z)((function(){var e,n;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return[4,sn()];case 1:return e=o.sent(),n={token:e,paxes:Ae,dates:Xe,promocode:en?_:""},[4,(0,R.A)((0,x.mW)(n))];case 2:return o.sent().hasError?[2,!1]:(U({current_room:1}),K({selectedRooms:[]}),D({dates:Xe}),E({paxes:Ae}),F({booking:{pax_rooms:ve,number_rooms:Re}}),W(n),z||document.getElementById("booking").submit(),[2,e])}}))}));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){le({paxes:Ae,dates:Xe,promocode:en?_:""})}),[Ae,Xe,_]);return(0,l.useEffect)((function(){!function(){var e=$.pax_rooms,n={},o=e,t=me.length;me.forEach((function(e,t){var r=o[t];e.adults&&(n={adults:e.adults}),e.children&&(n=(0,i.Z)((0,a.Z)({},n),{children:e.children})),e.childrenAges&&(n=(0,i.Z)((0,a.Z)({},n),{childrenAges:e.childrenAges})),o[t]=(0,a.Z)({},r,n)})),F({booking:{pax_rooms:o,number_rooms:t}}),Pe(o),Me(t)}()}),[]),(0,s.jsxs)(s.Fragment,{children:[O&&(0,s.jsx)(Z,{}),(0,s.jsxs)("form",{id:"booking",action:ke,className:"".concat(Te&&!o&&ue?"hidden":"block"," ").concat(p().bookingHotel," ").concat(an," ").concat(o?"px-1":""," ").concat(ue?"":rn),method:"get",children:[(0,s.jsx)("div",{id:"startCalendar",className:"invisible",ref:Ye}),(0,s.jsx)("input",{type:"hidden",name:"checkin",value:(null===Xe||void 0===Xe?void 0:Xe.checkin)||""}),(0,s.jsx)("input",{type:"hidden",name:"checkout",value:(null===Xe||void 0===Xe?void 0:Xe.checkout)||""}),(0,s.jsxs)("div",{className:"flex ".concat(ne?"".concat(p().bookingAside," flex-col"):"".concat(p().booking," flex-wrap"),"  items-center rounded ").concat(rn," "),children:[pe?(0,s.jsx)(ie,{t:r,onClickTogglealendar:tn,onClickModify:ln,onClickCancel:Y,language:b,selectedDates:Xe,paxRooms:ve,numberRooms:Re,withChildren:k,maxRooms:ye.maxRooms,maxPaxPerRoom:ye.maxPaxPerRoom,childrenMinAge:ye.childrenMinAge,childrenMaxAge:ye.childrenMaxAge,isModify:z,isMobile:o,onPaxRoomChange:Ie,onSelectedRoomsChange:Ee,hideActions:de,configurationKey:he}):(0,s.jsx)(A,{t:r,isMobile:o,selectedDates:Xe,language:b,isRelative:T,booking:$,toggleBoxCalendarHandler:tn,onPaxRoomChange:Ie,onSelectedRoomsChange:Ee,onClickModify:ln,size:q,showBtnCancel:B,onListing:n,isModify:z,isControlled:N,hidePrice:ce,isHome:ce}),o?un:null]})]}),o?null:un]})};var O,j={setDates:y.rm,setPaxes:y.DL,setBooking:y.Sj,setLoading:y.K4,setToken:y.o4,setCalendar:y.hb,setPromocode:y.mI,setSelectedRooms:y.ag,setCurrentRoom:y.N$};E.propTypes=(O={isMobile:h().bool,language:h().string.isRequired,withChildren:h().bool,setDates:h().func.isRequired,setPaxes:h().func.isRequired,isRelative:h().bool,showBtnCancel:h().bool,onClickCancel:h().func,sizeCalendar:h().string,isControlled:h().bool,onListing:h().bool,isModify:h().bool,setLoading:h().func.isRequired,setToken:h().func.isRequired,setSelectedRooms:h().func.isRequired,setCurrentRoom:h().func.isRequired},(0,r.Z)(O,"setSelectedRooms",h().func.isRequired),(0,r.Z)(O,"u",h().instanceOf(Object).isRequired),(0,r.Z)(O,"monthsToShow",h().number),(0,r.Z)(O,"handleOnClickModify",h().func),(0,r.Z)(O,"showBanksBell",h().bool),(0,r.Z)(O,"initDate",h().shape({month:h().number,year:h().number})),(0,r.Z)(O,"hotelCodes",h().arrayOf(h().number)),(0,r.Z)(O,"countryRule",h().string),(0,r.Z)(O,"maxRooms",h().number),(0,r.Z)(O,"childrenMinAge",h().number),(0,r.Z)(O,"childrenMaxAge",h().number),(0,r.Z)(O,"isHome",h().bool),(0,r.Z)(O,"noPromocode",h().bool),(0,r.Z)(O,"bookingChangeEvent",h().func),(0,r.Z)(O,"hideActions",h().bool),(0,r.Z)(O,"isAside",h().bool),(0,r.Z)(O,"configurationKey",h().string),(0,r.Z)(O,"calendarVersion",h().string),(0,r.Z)(O,"themeClass",h().instanceOf(Object)),(0,r.Z)(O,"priceFilter",h().bool),(0,r.Z)(O,"brand",h().string),O),E.defaultProps={monthsToShow:2,isMobile:!1,isAside:!1,onListing:!1,isRelative:!0,showBtnCancel:!1,onClickCancel:function(){},sizeCalendar:"default",isControlled:!0,isModify:!1,withChildren:!0,handleOnClickModify:function(){},showBanksBell:!0,maxRooms:5,maxPaxPerRoom:4,childrenMinAge:0,childrenMaxAge:18,hidePrice:!1,isHome:!1,noPromocode:!1,bookingChangeEvent:function(){},hideActions:!1,configurationKey:void 0,calendarVersion:"",themeClass:_.q,priceFilter:!1,brand:""};var L=(0,g.$j)((function(e){return{paxes:e.paxes,booking:e.booking,loading:e.loading,token:e.token,country:e.country,currency:e.currency,dates:e.dates,calendar:e.calendar,promocode:e.promocode}}),j)(E)},65873:function(e,n,o){"use strict";o.d(n,{A:function(){return t}});var t=function(e){return e.then((function(e){return{data:e,hasError:!1,error:""}})).catch((function(e){return Promise.resolve({data:!1,hasError:!0,error:e})}))}},11267:function(e,n,o){"use strict";o.d(n,{M6:function(){return f},Pe:function(){return m},T8:function(){return d},Tf:function(){return s},oH:function(){return h},xb:function(){return l}});var t=o(82670),r=o(82222),a=o(27484),i=o.n(a),c=(o(67763),o(30381)),u=o.n(c),s=function(e){return/<\/?[a-z][\s\S]*>/m.test(e)},l=function(e){var n="undefined"===typeof e?"undefined":(0,r.Z)(e);if("undefined"===n)return!0;if("boolean"===n)return!e;if(null===e)return!0;if(void 0===e)return!0;if((0,t.Z)(e,Array)){if(e.length<1)return!0}else if("string"===n){if(e.length<1)return!0;if("0"===e)return!0}else if("object"===n){if(Object.keys(e).length<1)return!0}else if("number"===n&&0===e)return!0;return!1},d=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DD MMMM YYYY";return i()(e).locale(n||"en").format(o)};function h(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}var f=function(e){return l(e)?null:Math.min.apply(null,e)};function m(e,n){var o=u()(e);return u()(n).diff(o,"days")}},59160:function(e,n,o){"use strict";o.d(n,{Py:function(){return d},Ye:function(){return h},mW:function(){return m}});var t=o(47568),r=o(20414),a=o(8221),i=o(27484),c=o.n(i),u=o(25474),s=o(63273),l=o(12325),d=function(e){var n=e.token,o=e.language,t=e.currency,r=e.promocode,i=e.paxes,d=e.dates,h=e.country,f=e.hotelCode,m=e.countryRule,g=!1;i&&(g=i.map((function(e){return{Adults:e.adults}})));var C={channel:a.I.CHANNEL,clientID:a.I.CLIENT_ID,language:o||"es",currency:t||"USD",country:(0,u.g)({currency:t,country:h,rule:m}),promocode:r||"",hotelCode:f||(0,l.Ps)(a.I.CODES),habs:[],paxes:g||[{Adults:2}],checkIn:d?d.checkin:c()().add(1,"day").format("YYYY-MM-DD"),checkOut:d?d.checkout:c()().add(2,"day").format("YYYY-MM-DD")};return new Promise((function(e,o){(0,s.M$)(n).then((function(t){200===t.status?e(n):(0,s.aH)(C.channel,C.clientID,C.language,C.country,C.currency,C.promocode,C.hotelCode,C.habs,C.paxes,C.checkIn,C.checkOut).then((function(n){var o=n.data;e(o)})).catch((function(e){console.log(e),o(e)}))})).catch((function(n){(0,s.aH)(C.channel,C.clientID,C.language,C.country,C.currency,C.promocode,C.hotelCode,C.habs,C.paxes,C.checkIn,C.checkOut).then((function(n){var o=n.data;e(o)})).catch((function(e){console.log(e),o(e)}))}))}))},h=function(e){return new Promise((function(n,o){(0,s.M$)(e).then((function(e){var o=e.data;n(o)})).catch((function(e){o(e),console.error(e)}))}))},f=function(e){return new Promise((function(n,o){(0,s.Xd)(e.SessionID,e.Channel,e.ClientID,e.Language,e.Country,e.Currency,e.PromoCode,e.HotelCode,e.Habs,e.Paxes,e.CheckIn,e.CheckOut,e.Ecommerce).then((function(e){200===e.status?n(!0):n(!1)})).catch((function(e){o(e),console.error(e),n(!1)}))}))},m=function(){var e=(0,t.Z)((function(e){var n,o,t,i,c,s,d,m,g,C,b;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return n=e.token,o=e.currency,t=e.promocode,i=e.selectedRooms,c=e.paxes,s=e.dates,d=e.country,m=e.hotelCode,g=e.countryRule,C=!1,b=[],c&&(C=c.map((function(e){return{Adults:e.adults,Children:e.children,Ages:e.childrenAges}}))),i&&(b=i.map((function(e){return e?{RoomCode:e.code,Name:e.name,RatePlanCode:e.plan,Amount:e.amount,Legal:e.legal,Afi:(null===e||void 0===e?void 0:e.afi)||{}}:null}))),[4,h(n).then((function(e){var r=m||(0,l.Ps)(a.I.CODES),i=o||e.Header.Currency,c=d||e.Header.Country,h=(0,u.g)({currency:i,country:c,rule:g}),k=null!==t?t:e.PromoCode,p={SessionID:n,Channel:e.Header.Channel,ClientID:e.Header.ClientId,Language:e.Header.Language,Country:h,Currency:i,PromoCode:k,HotelCode:r,Habs:b,Paxes:C||e.Paxes,CheckIn:s?s.checkin:e.CheckIn,CheckOut:s?s.checkout:e.CheckOut};return f(p)})).catch((function(){return!1}))];case 1:return[2,r.sent()]}}))}));return function(n){return e.apply(this,arguments)}}();!function(){var e=(0,t.Z)((function(e){var n,o;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return n=e.ecommerce,o=e.token,[4,h(o).then((function(e){var t={SessionID:o,Channel:e.Header.Channel,ClientID:e.Header.ClientId,Language:e.Header.Language,Country:e.Header.Country,Currency:e.Header.Currency,PromoCode:e.PromoCode,HotelCode:e.Hotel.HotelCode,Habs:e.Hotel.Habs,Paxes:e.Paxes,CheckIn:e.CheckIn,CheckOut:e.CheckOut,Ecommerce:n};return f(t)})).catch((function(){return!1}))];case 1:return[2,t.sent()]}}))}))}()},75389:function(e){e.exports={bookingHotel:"booking_bookingHotel__EetNn",bookingAside:"booking_bookingAside__iJlDO",small:"booking_small__gnt7v",smallRooms:"booking_smallRooms__Ztn3y",negativeMargin1:"booking_negativeMargin1___8VI_",paddedLabel:"booking_paddedLabel__Z5Uvr",adultSpan:"booking_adultSpan__zjHw3",calAsideDesk:"booking_calAsideDesk__qXGjU"}}}]);